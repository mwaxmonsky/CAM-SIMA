
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../cam-run-process/">
      
      
        <link rel="next" href="../constituents/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>CCPP in CAM-SIMA - CAM-SIMA</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 8H6l6-6 6 6h-4v8h4l-6 6-6-6h4V8Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ccpp-in-cam-sima" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CAM-SIMA" class="md-header__button md-logo" aria-label="CAM-SIMA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CAM-SIMA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CCPP in CAM-SIMA
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CAM-SIMA" class="md-nav__button md-logo" aria-label="CAM-SIMA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CAM-SIMA
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAM-SIMA developer documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Conversion
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conversion/ccpp-conversion-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAM Parameterization to CCPP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cam-build-process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cam-run-process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    CCPP in CAM-SIMA
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    CCPP in CAM-SIMA
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Code Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#host-model" class="md-nav__link">
    <span class="md-ellipsis">
      Host Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics" class="md-nav__link">
    <span class="md-ellipsis">
      Physics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generated-caps" class="md-nav__link">
    <span class="md-ellipsis">
      Generated caps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#host-side-variables-and-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Host-side variables and metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-and-tendency-variables" class="md-nav__link">
    <span class="md-ellipsis">
      State and tendency variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State and tendency variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#physics-state" class="md-nav__link">
    <span class="md-ellipsis">
      Physics state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics-tendencies" class="md-nav__link">
    <span class="md-ellipsis">
      Physics tendencies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../constituents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constituents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History &amp; model output
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sima-design-goals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Design goals &amp; features
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/cam-coding-standards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coding standards
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/cam-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging techniques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/git-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with git and GitHub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/git-faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git &amp; GitHub FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/git-fleximod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git-fleximod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tool-recommendations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tool recommendations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/creating-a-case/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating, configuring, and running a case
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History &amp; model output
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Code Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#host-model" class="md-nav__link">
    <span class="md-ellipsis">
      Host Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics" class="md-nav__link">
    <span class="md-ellipsis">
      Physics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generated-caps" class="md-nav__link">
    <span class="md-ellipsis">
      Generated caps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#host-side-variables-and-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Host-side variables and metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-and-tendency-variables" class="md-nav__link">
    <span class="md-ellipsis">
      State and tendency variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State and tendency variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#physics-state" class="md-nav__link">
    <span class="md-ellipsis">
      Physics state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics-tendencies" class="md-nav__link">
    <span class="md-ellipsis">
      Physics tendencies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ccpp-in-cam-sima">CCPP in CAM-SIMA</h1>
<h2 id="overview">Overview</h2>
<p>The core Common Community Physics Package (CCPP) documentation can be found <a href="https://dtcenter.org/community-code/common-community-physics-package-ccpp/documentation">here</a>. This section details the code structure and implementation of the CCPP Framework within CAM-SIMA. That said here's a quick overview of the CCPP:</p>
<ul>
<li>A CCPP-enabled model consists of the following components (depicted in the diagram below):<ul>
<li>Host model and dynamical core</li>
<li>CCPP-compliant physics schemes (organized into Suite Definition Files [SDFs])</li>
<li>Caps generated by the CCPP framework to connect the host model to the physics schemes</li>
</ul>
</li>
</ul>
<p><img alt="text" src="../figures/ccpp-framework.PNG" title="CCPP design" /></p>
<p>CCPP-compliant physics schemes must adhere to the following criteria:</p>
<ul>
<li>Must be broken up into only the following phases:<ul>
<li><em>register</em> (anything in the scheme that must be done before the grid is initialized) - run once at startup</li>
<li><em>init</em> - run once at startup</li>
<li><em>timestep_init</em> - run at beginning of every physics timestep</li>
<li><em>run</em> - run on every timestep</li>
<li><em>timestep_final</em> - run at the end of every timestep</li>
<li><em>final</em> - run once at the end of model execution</li>
</ul>
</li>
<li>Must contain metadata for all input/output/inout variables passed into each phase (see metadata example below)</li>
<li>Must not have use statements outside of the following allowed CCPP use statements (with the exception of <code>dependencies</code>, but we're not getting into that now):<ul>
<li>ccpp_kinds</li>
<li>ccpp_constituent_prop_mod</li>
</ul>
</li>
</ul>
<p><em>Metadata example</em>
(snippet taken from <code>kessler.meta</code>)</p>
<pre><code>[ precl ]
  standard_name = total_precipitation_rate_at_surface
  long_name = Total precipitation rate at surface
  units = m s-1
  dimensions = (horizontal_loop_extent)
  type = real | kind = kind_phys
  intent = out
[ relhum ]
  standard_name = relative_humidity
  long_name = Relative humidity
  units = percent
  dimensions = (horizontal_loop_extent, vertical_layer_dimension)
  type = real | kind = kind_phys
  intent = out
[ scheme_name ]
  standard_name = scheme_name
  units = none
  type = character | kind = len=64
  dimensions = ()
  intent = out

</code></pre>
<p>CCPP-compliant physics schemes are organized into suite definition files (<a href="https://ccpp-techdoc.readthedocs.io/en/v6.0.0/ConstructingSuite.html?highlight=sdf#constructing-suites">SDFs</a>). An SDF tells the framework which schemes will be run in what order. Separating schemes into "groups" also allows the run phases of those groups to be called separately by the host model. Here's an example SDF (from suite_kessler.xml):</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;suite name=&quot;kessler&quot; version=&quot;1.0&quot;&gt;
  &lt;group name=&quot;physics_before_coupler&quot;&gt;
    &lt;scheme&gt;calc_exner&lt;/scheme&gt;
    &lt;scheme&gt;temp_to_potential_temp&lt;/scheme&gt;
    &lt;scheme&gt;calc_dry_air_ideal_gas_density&lt;/scheme&gt;
    &lt;scheme&gt;wet_to_dry_water_vapor&lt;/scheme&gt;
    &lt;scheme&gt;wet_to_dry_cloud_liquid_water&lt;/scheme&gt;
    &lt;scheme&gt;wet_to_dry_rain&lt;/scheme&gt;
    &lt;scheme&gt;kessler&lt;/scheme&gt;
    &lt;scheme&gt;potential_temp_to_temp&lt;/scheme&gt;
    &lt;scheme&gt;dry_to_wet_water_vapor&lt;/scheme&gt;
    &lt;scheme&gt;dry_to_wet_cloud_liquid_water&lt;/scheme&gt;
    &lt;scheme&gt;dry_to_wet_rain&lt;/scheme&gt;
    &lt;scheme&gt;kessler_update&lt;/scheme&gt;
    &lt;scheme&gt;qneg&lt;/scheme&gt;
    &lt;scheme&gt;geopotential_temp&lt;/scheme&gt;
    &lt;scheme&gt;cam_state_diagnostics&lt;/scheme&gt;
    &lt;scheme&gt;kessler_diagnostics&lt;/scheme&gt;
  &lt;/group&gt;
  &lt;group name=&quot;physics_after_coupler&quot;&gt;
    &lt;scheme&gt;cam_tend_diagnostics&lt;/scheme&gt;
  &lt;/group&gt;
&lt;/suite&gt;
</code></pre>
<p>The framework code is primarily python code that generates Fortran caps. The class structure looks like:</p>
<figure>
<img alt="text" src="../figures/capgen-design.PNG" title="CCPP Framework capgen class diagram" width="80%" />
</figure>
<p>Given CCPP-compliant physics schemes and one or more SDF, the framework generates caps for the host model to call at the appropriate time. The core files generated by the framework are:</p>
<ul>
<li><code>&lt;host&gt;_ccpp_cap.F90</code>: contains the interface layer between the host and the suite(s)</li>
<li><code>ccpp_&lt;suite&gt;_cap.F90</code>: contains one subroutine per phase (including one run phase per group) in which the phases of the schemes within the suite are called in order<ul>
<li>There is one suite cap generated for each suite being run</li>
</ul>
</li>
<li><code>ccpp_datatable.xml</code>: consolidates metadata into an XML file to be used as desired by the host model</li>
</ul>
<h2 id="code-structure">Code Structure</h2>
<p>How CAM-SIMA and the CCPP come together:
<img alt="text" src="../figures/ccpp-framework-in-cam-sima.PNG" title="CCPP design in CAM-SIMA" /></p>
<h3 id="host-model">Host Model</h3>
<p>The core host model code is what is held in the <a href="https://github.com/ESCOMP/CAM-SIMA/tree/development">CAM-SIMA</a> github repository, plus code that is generated at build-time (or preview_namelists-time) based on the registry (<code>src/data/registry.xml</code>).</p>
<h3 id="physics">Physics</h3>
<p>The CCPP physics scheme code exists in the <a href="https://github.com/ESCOMP/atmospheric_physics">atmospheric_physics</a> repository, which exists as a submodule of CAM-SIMA in the following location:
<code>$CAM-SIMA/src/physics/ncar_ccpp</code></p>
<p>SDFs are located in the root directory of the repository and scheme source code is in the relevant subdirectories. </p>
<p>The <code>diagnostics</code> directory contains all diagnostic schemes (the global ones used for state and tendency output, as well as the scheme-specific diagnostic schemes).</p>
<p>The <code>to_be_ccppized</code> directory contains physics schemes and utilties that have not been <a href="../../conversion/ccpp-conversion-guide/">CCPP-ized</a>, but were needed by an CCPP-ized scheme.</p>
<p>The <code>utilities</code> directory contains schemes that are used regularly, such as tendency applicators and state converters. See <a href="#state-and-tendency-variables">below</a> for more.</p>
<h3 id="generated-caps">Generated caps</h3>
<p>The caps generated by the CCPP Framework at model build time (or preview_namelists-time) can be found in the following location:
<code>$CASE/bld/atm/obj/ccpp/</code></p>
<h2 id="implementation">Implementation</h2>
<p>All CCPP phases are called from the physics driver (<code>src/physics/utils/phys_comp.F90</code>). You can see the order of these calls more thoroughly in the documented <a href="../cam-run-process/">run sequence</a>.</p>
<h3 id="host-side-variables-and-metadata">Host-side variables and metadata</h3>
<p>For a CCPP-ized physics scheme to work, the framework needs to be able to find a matching variable on the host side for each input variable for the suite(s) in question. This means that CAM-SIMA needs to allocate, initialize, and provide metadata for these variables. We do this in two ways:</p>
<ul>
<li>Adding metadata to existing CAM modules (such as <code>src/data/physconst.F90</code>) so that a scheme can access an existing host model variable<ul>
<li>All static host-side metadata schemes are included at the top of the registry</li>
</ul>
</li>
<li>Adding a variable to the registry (<code>src/data/registry.xml</code>)<ul>
<li>You can learn more about how the registry is used to generate a Fortran module and corresponding metadata <a href="../cam-build-process/#cam-sima-source-and-namelist-generation-buildnml-workflow">here</a></li>
</ul>
</li>
</ul>
<p>The registry-based code generator is run before the CCPP framework does its magic, so, when it's time, the framework can connect the dots between the host model and the physics.</p>
<h3 id="state-and-tendency-variables">State and tendency variables</h3>
<p>Two of the most commonly used and referred-to objects in CAM-SIMA are:</p>
<ul>
<li><strong>physics_state</strong></li>
<li><strong>physics_tend</strong></li>
</ul>
<p>The Fortran for both objects is auto-generated by CAM-SIMA based on the registry (<code>$CAM-SIMA/src/data/registry.xml</code>). The generated code can be found here: <code>$CASE/bld/atm/obj/cam_registry/physics_types.F90</code>. The objects are used by the host model (CAM-SIMA), while the CCPP physics take the individual component variables as inputs.</p>
<h4 id="physics-state">Physics state</h4>
<p>The <em>physics_state</em> object in CAM-SIMA contains the current values for a select set of variables that describe the atmosphere, at the resolution specified by the input grid.</p>
<p>Some examples of these core "state" variables include temperature (<code>T</code>), eastward wind (<code>U</code>), and northward wind (<code>V</code>)</p>
<p>As a rule, CAM-SIMA physics schemes do not update the state directly and instead return tendencies (see below) which are then applied to the state later in the run phase. This is called <em>time splitting</em>, which means that all physics since the last state update get the same input state. The alternative, <em>process splitting</em>, means that the output state of one scheme serves as the input state of the next.</p>
<figure>
<img alt="text" src="../figures/process-vs-time-split.PNG" title="Process vs Time Split" width="70%" />
</figure>
<p>NOTE: Although <a href="../constituents/">constituents</a> are handled independently of the <code>physics_state</code> object (they are handled by the CCPP framework), they ARE considered state variables.</p>
<h4 id="physics-tendencies">Physics tendencies</h4>
<p>The physics tendencies represent how a given scheme (or schemes) changes the state in a single model timestep. The tendencies are accumulated until it is time to apply them to the state. There is one tendency for each state variable being "updated" by the scheme. Some of these tendency variables are held within the <em>physics_tend</em> object, but others are internal to the physics.</p>
<p>The module <code>$CAM-SIMA/src/physics/ncar_ccpp/utilities/physics_tendency_updaters.F90</code> includes the schemes to apply the tendencies to the relevant state variables. These schemes are added to the SDF whenever the state should be updated. Each calculation looks like: <code>state_var = state_var + tend*dt</code> where <code>dt</code> is the timestep size.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>